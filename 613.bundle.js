"use strict";(self.webpackChunkanalytics_dashboard_react_challenge=self.webpackChunkanalytics_dashboard_react_challenge||[]).push([[613],{613:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var a=n(7294),l=n(5401),c=n(9442),o=n(4942),r=n(30),s=n(7888),i=n(8508),m=n(8752);const u=function(e){var t=e.id,n=e.label,l=e.name,c=e.value,o=e.options,r=e.onChange,u=e.showAll,d=void 0!==u&&u,p=(0,a.useCallback)((function(e){var t=e.target,n=t.value,a=t.name;r({value:n,name:a})}),[r]);return a.createElement(s.Z,{fullWidth:!0,"data-testid":"".concat(t,"-testid")},a.createElement(i.Z,{id:"".concat(t,"-label"),"aria-labelledby":t},n),a.createElement(m.Z,{native:!0,id:t,labelId:"".concat(t,"-label"),label:n,name:l,value:c,onChange:p},d&&a.createElement("option",{value:"all"},"Show all"),o&&o.map((function(e){return a.createElement("option",{value:e,key:e},e)}))))};var d=n(8003),p=n(8546);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const v=function(){var e=(0,d.T)(),t=(0,d.C)((function(e){return e.schoolLesson})),n=t.lookups,l=n.countries,c=n.camps,s=n.schools,i=t.filters,m=(0,a.useCallback)((function(t){var n=t.value,a=t.name,l=h(h({},i),{},(0,o.Z)({},a,n));"school"!==a&&(l.school="all"),e((0,p.jl)(l))}),[i]);return a.createElement(r.ZP,{component:"section",container:!0,sx:{mb:6,mt:1},spacing:4,justifyContent:"space-evenly"},a.createElement(r.ZP,{item:!0,xs:6,sm:4,sx:{p:0}},a.createElement(u,{id:"countries",label:"Countries",name:"country",value:i.country,options:l,onChange:m})),a.createElement(r.ZP,{item:!0,xs:6,sm:4},a.createElement(u,{id:"camps",label:"Camps",name:"camp",value:i.camp,options:c,onChange:m})),a.createElement(r.ZP,{item:!0,xs:6,sm:4},a.createElement(u,{id:"schools",label:"Schools",name:"school",value:i.school,options:s["".concat(i.country,"-").concat(i.camp)],onChange:m,showAll:!0})))};var b=n(8152),E=n(5722),g=n(6974),y=n(1557),x=n(8720),Z=n(5376),C=n(5512);C.kL.register(C.uw,C.f$,C.od,C.jn,C.u);const O=function(e){var t=e.labels,n=e.datasets,l=e.onClick,c=e.id,o=void 0===c?"line-chart":c,r=(0,a.useRef)(null);return a.createElement(x.Z,{"data-testid":"".concat(o,"-testid")},a.createElement(Z.x1,{ref:r,data:{labels:t,datasets:n},onClick:function(e){var t=r.current;if(t){var n=(0,Z.cX)(t,e);n&&n.length&&l(n[0].datasetIndex)}}}))};var k=n(9144),P=n(1647),j=n(1822);const w=function(e){var t=e.label,n=e.value,l=e.color,c=e.onChange,o=e.id,s=void 0===o?"custom-switch":o;return a.createElement(r.ZP,{container:!0,spacing:2,"data-testid":"".concat(s,"-testid")},a.createElement(r.ZP,{item:!0,xs:2},a.createElement(j.Z,{checked:n,onClick:function(){c()},color:"secondary",sx:n?{"&, &.Mui-checked":{color:l}}:{}})),a.createElement(r.ZP,{item:!0,xs:10},t))};var D=function(e){var t=e.total,n=e.camp,l=e.color,c=void 0===l?"primary":l;return a.createElement(a.Fragment,null,a.createElement(x.Z,{sx:{display:"flex",alignItems:"baseline"}},a.createElement(P.Z,{component:"span",variant:"h5",color:c},"".concat(t," ")),a.createElement(P.Z,{component:"span",variant:"body1",color:c,sx:{px:1}},"Lessons")),a.createElement(P.Z,{variant:"subtitle2",component:"span",color:c,style:{marginTop:0}},"in ",n))};const _=function(){var e=(0,d.T)(),t=(0,d.C)((function(e){return e.schoolLesson})),n=t.filteredData,l=n.schools,c=n.total,o=t.filters.camp;return a.createElement(k.Z,{spacing:2,sx:{padding:4}},a.createElement(D,{total:c,camp:o,color:"text.secondary"}),Object.keys(l).map((function(t){return a.createElement(w,{key:t,label:a.createElement(D,{total:l[t].total,camp:t,color:l[t].selected?l[t].color:"text.secondary"}),value:l[t].selected,color:l[t].color,onChange:function(){return n=t,void e((0,p.Bb)(n));var n}})})))},L=function(){var e=(0,g.s0)(),t=(0,a.useState)([]),n=(0,b.Z)(t,2),l=n[0],c=n[1],o=(0,d.C)((function(e){return e.schoolLesson})).filteredData.schools;return(0,a.useEffect)((function(){var e=[];for(var t in o)o[t].selected&&e.push({label:t,data:Object.values(o[t].months),borderColor:o[t].color});c(e)}),[o]),a.createElement(r.ZP,{container:!0,component:"section"},a.createElement(r.ZP,{item:!0,xs:12,md:8,lg:9},a.createElement(E.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:"100%"}},a.createElement(O,{labels:y._,datasets:l,onClick:function(t){var n=l[t].label;e("/details/".concat(n))}}))),a.createElement(r.ZP,{item:!0,xs:12,md:4,lg:3},a.createElement(E.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:"100%"}},a.createElement(_,null))))},S=function(){var e=(0,d.C)((function(e){return e.schoolLesson})),t=e.loading,n=e.error,o=e.originalData;return a.createElement(a.Fragment,null,t&&a.createElement(c.Z,null),!t&&n&&a.createElement("p",null,n),!t&&o.length&&a.createElement(l.Z,{component:"main",maxWidth:"xl",sx:{mt:4,mb:4}},a.createElement(v,null),a.createElement(L,null)))}}}]);